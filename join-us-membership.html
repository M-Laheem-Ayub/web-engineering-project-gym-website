<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="assets/images/fg-images/favicon.ico" />
  <title>Membership Form - Structure Health & Fitness</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="join-us-&-membership-style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <header id="header">
    <a id="logo" href="index.html">
      <img src="assets/images/fg-images/logo.png" alt="Logo" />
    </a>
    <button class="menu-toggle" id="menuToggle" onclick="toggleMenu()">☰ Menu</button>

    <nav id="navbar">
      <ul>
        <a onclick="toggleMenu()" href="#">
          <li>Why Us</li>
        </a>
        <a onclick="toggleMenu()" href="join-us-membership.html">
          <li>Membership</li>
        </a>
        <a onclick="toggleMenu()" href="#">
          <li>Our Branches</li>
        </a>
        <a onclick="toggleMenu()" href="#">
          <li>Contact</li>
        </a>
      </ul>
      <a onclick="toggleMenu()" href="join-us-membership.html" class="btn-container">
        <button>Join Now</button>
      </a>
    </nav>
  </header>
  <main onclick="closeMenu()">

    <div class="container">
      <form class="form-section">
        <label for="name">Your Name:</label>
        <input type="text" id="name" name="name" />

        <label for="email">Your Email:</label>
        <input type="email" id="email" name="email" />

        <label for="gender">Gender:</label>
        <select id="gender" name="gender">
          <option>Select Gender</option>
          <option>Male</option>
          <option>Female</option>
          <option>Other</option>
        </select>

        <label for="occupation">What is Your Occupation?</label>
        <input type="text" id="occupation" name="occupation" />

        <label for="country">Country:</label>
        <input type="text" id="country" name="country" value="Pakistan" />

        <label for="phone">Phone:</label>
        <input type="tel" id="phone" name="phone" />

        <label for="branch">Your Branch:</label>
        <select id="branch" name="branch">
          <option>--Please choose an option--</option>
          <option>Gulberg</option>
          <option>DHA</option>
          <option>Johar Town</option>
        </select>

        <div class="row-group-Container">
          <div class="row-group">
            <label>Weight (kg):</label>
            <input type="number" name="weight" id="weight" />
            <label>Height (feet):</label>
            <input type="number" name="heightFeet" id="feet" />
            <label>Height (inches):</label>
            <input type="number" name="heightInches" id="inches" />
          </div>
        </div>

        <label>BMI:</label>
        <input type="text" name="bmi" id="bmi-value" readonly />

        <label>BMI Category:</label>
        <input type="text" name="bmiCategory" id="bmi-category" readonly />

        <label>Fitness Goals:</label>
        <div class="checkbox-group">
          <label><input type="checkbox" name="goal" value="weightLoss" /> Weight Loss</label>
          <label><input type="checkbox" name="goal" value="muscleGain" /> Muscle Gain</label>
          <label><input type="checkbox" name="goal" value="overallHealth" /> Overall Health</label>
        </div>

        <label>Do You Smoke?</label>
        <div class="radio-group">
          <label><input type="radio" name="smoke" value="yes" /> Yes</label>
          <label><input type="radio" name="smoke" value="no" /> No</label>
          <label><input type="radio" name="smoke" value="sometimes" /> Sometimes</label>
        </div>

        <label>Do You Consume Alcohol?</label>
        <div class="radio-group">
          <label><input type="radio" name="alcohol" value="yes" /> Yes</label>
          <label><input type="radio" name="alcohol" value="no" /> No</label>
          <label><input type="radio" name="alcohol" value="sometimes" /> Sometimes</label>
        </div>



        <label>Commitment Level (0-100):</label>
        <input type="range" min="0" max="100" value="50" id="commitSlider" />
        <p>Current Level: <span id="commitValue">50</span></p>

        <button type="submit" class="submit-btn">SUBMIT</button>
      </form>

      <div class="chart-section">
        <canvas id="bmiChart"></canvas>
      </div>
    </div>
  </main>

  <script>
    document.getElementById("commitSlider").addEventListener("input", function () {
      document.getElementById("commitValue").textContent = this.value;
    });


    document
      .querySelector(".form-section")
      .addEventListener("submit", function (e) {
        e.preventDefault(); // Form submit rok do

        // Remove old error messages
        document.querySelectorAll(".error-msg").forEach((el) => el.remove());

        let valid = true;

        const showError = (element, message) => {
          const error = document.createElement("p");
          error.className = "error-msg";
          error.style.color = "red";
          error.style.margin = "5px 0 0";
          error.style.fontSize = "14px";
          error.innerText = message;
          element.insertAdjacentElement("afterend", error);
          valid = false;
        };

        const name = document.getElementById("name");
        if (name.value.trim() === "") showError(name, "Name is required");

        const email = document.getElementById("email");
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (email.value.trim() === "") showError(email, "Email is required");
        else if (!emailRegex.test(email.value.trim()))
          showError(email, "Enter a valid email");

        const gender = document.getElementById("gender");
        if (gender.value === "Select Gender")
          showError(gender, "Please select your gender");

        const phone = document.getElementById("phone");
        if (phone.value.trim() === "")
          showError(phone, "Phone number is required");
        else if (phone.value.trim().length < 10)
          showError(phone, "Phone number too short");

        const weight = document.querySelector("[name='weight']");
        if (weight.value.trim() === "")
          showError(weight, "Enter your weight");
        else if (isNaN(weight.value.trim()) || weight.value.trim() <= 0)
          showError(weight, "Invalid weight");

        const heightFeet = document.querySelector("[name='heightFeet']");
        if (heightFeet.value.trim() === "")
          showError(heightFeet, "Enter height in feet");
        else if (
          isNaN(heightFeet.value.trim()) ||
          heightFeet.value.trim() <= 0
        )
          showError(heightFeet, "Invalid height");

        const heightInches = document.querySelector("[name='heightInches']");
        if (heightInches.value.trim() === "")
          showError(heightInches, "Enter inches");
        else if (
          isNaN(heightInches.value.trim()) ||
          heightInches.value.trim() < 0
        )
          showError(heightInches, "Invalid inches");

        // If everything is valid, submit
        if (valid) {
          alert("Form submitted successfully!");
          this.submit();
        }
      });


    const weightInput = document.getElementById("weight");
    const feetInput = document.getElementById("feet");
    const inchInput = document.getElementById("inches");
    const bmiField = document.getElementById("bmi-value");
    const categoryField = document.getElementById("bmi-category");

    let chart;

    function updateChart(bmi, category) {
      const categories = ["Underweight", "Normal weight", "Overweight", "Obesity"];
      const values = categories.map(cat => cat === category ? bmi : 0);

      chart.data.datasets[0].data = values;
      chart.update();
    }

    function autoCalculateBMI() {
      const weight = parseFloat(weightInput.value);
      const feet = parseFloat(feetInput.value);
      const inches = parseFloat(inchInput.value);

      if (isNaN(weight) || isNaN(feet) || isNaN(inches)) return;

      const totalInches = (feet * 12) + inches;
      const heightMeters = totalInches * 0.0254;
      const bmi = weight / (heightMeters * heightMeters);
      const bmiRounded = bmi.toFixed(2);
      bmiField.value = bmiRounded;

      let category = "";
      if (bmi < 18.5) category = "Underweight";
      else if (bmi < 25) category = "Normal weight";
      else if (bmi < 30) category = "Overweight";
      else category = "Obesity";

      categoryField.value = category;

      updateChart(parseFloat(bmiRounded), category);
    }

    [weightInput, feetInput, inchInput].forEach(input => {
      input.addEventListener("input", autoCalculateBMI);
    });

    window.onload = function () {
      const ctx = document.getElementById("bmiChart").getContext("2d");
      chart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ["Underweight", "Normal weight", "Overweight", "Obesity"],
          datasets: [{
            label: 'BMI Value',
            data: [0, 0, 0, 0],
            backgroundColor: ['#00BFFF', '#32CD32', '#FFA500', '#FF4500'],
            borderColor: '#222',
            borderWidth: 2
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              labels: { color: '#000' }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 40,
              ticks: { color: '#000' },
              grid: { color: '#ddd' }
            },
            x: {
              ticks: { color: '#000' },
              grid: { color: '#ddd' }
            }
          }
        }
      });
    };
    const menuBtn = document.getElementById('menuToggle');
    const header = document.getElementById('header');
    let toggle = false;

    function closeMenu() {
      toggle = !toggle;
      const nav = document.getElementById("navbar");
      nav.classList.remove('active');
      menuBtn.textContent = "☰ Menu";
      menuBtn.style.color = "white";
    }

    function toggleMenu() {
      toggle = !toggle;
      const nav = document.getElementById("navbar");
      nav.classList.toggle("active");

      if (toggle) {
        menuBtn.textContent = "☰ Close";
        menuBtn.style.color = "#ffD200";
      } else {
        menuBtn.textContent = "☰ Menu";
        menuBtn.style.color = "white";
      }
    }

  </script>
</body>

</html>